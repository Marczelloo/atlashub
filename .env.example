# AtlasHub Environment Variables
# Copy this file to .env and fill in the values

# ============================================================
# PostgreSQL
# ============================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=YOUR_SECURE_PASSWORD_HERE
POSTGRES_DB=platform
# Expose port locally (format: IP:PORT, use 127.0.0.1 for local only)
POSTGRES_PORT_EXPOSE=127.0.0.1:5433
POSTGRES_MAX_POOL_SIZE=5

# ============================================================
# MinIO (S3-compatible storage)
# ============================================================
MINIO_ACCESS_KEY=atlashub
MINIO_SECRET_KEY=YOUR_SECURE_MINIO_SECRET_KEY_HERE
MINIO_REGION=us-east-1
# Expose ports locally (format: IP:PORT)
MINIO_PORT_EXPOSE=127.0.0.1:9100
MINIO_CONSOLE_PORT_EXPOSE=127.0.0.1:9101

# ============================================================
# Security
# ============================================================
# Master key for encrypting project database credentials (REQUIRED)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
PLATFORM_MASTER_KEY=YOUR_SECURE_PLATFORM_MASTER_KEY_HERE

# JWT secret for session tokens (min 32 chars, REQUIRED)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=YOUR_SECURE_JWT_SECRET_HERE

# Session duration in hours
SESSION_EXPIRY_HOURS=24

# Initial admin credentials (optional, only used on first run if set)
# Leave blank to use the interactive setup via /auth/setup endpoint
ADMIN_EMAIL=
ADMIN_PASSWORD=

# Development admin token (only used when NODE_ENV=development)
# Allows bypassing auth in dev mode with x-dev-admin-token header
DEV_ADMIN_TOKEN=your-dev-token-change-me
# Same token exposed to browser for dev dashboard (only in development!)
NEXT_PUBLIC_DEV_ADMIN_TOKEN=your-dev-token-change-me

# ============================================================
# Cloudflare Access (Production only)
# ============================================================
# Team domain from Cloudflare Access (e.g., myteam.cloudflareaccess.com)
CF_ACCESS_TEAM_DOMAIN=
# Audience tag (aud claim) from your Access application
CF_ACCESS_AUDIENCE=

# ============================================================
# Cloudflare Tunnel (Production only)
# ============================================================
CLOUDFLARE_TUNNEL_TOKEN=

# ============================================================
# Gateway Configuration
# ============================================================
NODE_ENV=development
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=info
# Allowed CORS origins (comma-separated or * for all)
CORS_ORIGINS=*
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000
STATEMENT_TIMEOUT_MS=5000
MAX_ROWS_PER_QUERY=1000
PRESIGNED_URL_EXPIRY_SECONDS=3600

# Postgres connection for gateway (use localhost for local dev, 'postgres' for Docker)
POSTGRES_HOST=localhost
POSTGRES_PORT=5433

# MinIO connection for gateway (use localhost for local dev, 'minio' for Docker)
MINIO_ENDPOINT=localhost
MINIO_PORT=9100
MINIO_USE_SSL=false

# ============================================================
# Dashboard
# ============================================================
# Public URL for the gateway API (used in browser)
NEXT_PUBLIC_GATEWAY_URL=http://localhost:3001
# Internal URL for server-side requests (same as above for local dev)
GATEWAY_INTERNAL_URL=http://localhost:3001

# Optional: Cookie domain for cross-subdomain auth (e.g., .yourdomain.com)
# Leave empty for localhost development
COOKIE_DOMAIN=

# ============================================================
# Scheduler (Cron Jobs)
# ============================================================
# How often to poll for jobs (in milliseconds)
SCHEDULER_POLL_INTERVAL_MS=30000
# Default timeout for HTTP jobs (in milliseconds)
SCHEDULER_DEFAULT_TIMEOUT_MS=30000
# Maximum concurrent jobs to run
SCHEDULER_MAX_CONCURRENT_JOBS=5
# Discord webhook URL for job failure notifications (optional)
DISCORD_WEBHOOK_URL=
#TEST FOR COMMIT T
# ============================================================
